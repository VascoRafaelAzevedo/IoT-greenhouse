# GardenAway IoT - Environment Variables Example
# Copy this file to .env and adjust values. Never commit your real .env.
# Comments explain purpose + possible future use.

# -----------------------------
# Core Environment / Deployment
# -----------------------------
ENVIRONMENT=development              # deployment environment tag (development|staging|production)
SERVICE_NAMESPACE=gardenaway         # logical namespace / for metrics, logs

# -----------------------------
# Database (PostgreSQL + TimescaleDB)
# Unified naming (DB_*). Compose maps these to container.
# -----------------------------
DB_USER=postgres
DB_PASSWORD=change_me_strong_pass    # strong password in real .env or secret manager
DB_NAME=greenhouse                   # production database with seed data
DB_NAME_TEST=greenhouse_test         # test database without seed data
DB_PORT=5432                         # external exposed port (mapped to 5432 inside)
DB_HOST=postgres                     # internal hostname (keep as service name in compose)
DB_POOL_MIN=1                        # future: SQLAlchemy / pool tuning
DB_POOL_MAX=10                       # future: tune for API concurrency
DB_SSLMODE=disable                   # set require / verify-full in cloud managed DB

# TimescaleDB / retention future flags (read by worker/migrations)
DB_TELEMETRY_RETENTION_DAYS=365      # future: downsampling policies
DB_SETPOINT_RETENTION_DAYS=365

# -----------------------------
# MQTT Broker (Mosquitto)
# -----------------------------
MQTT_HOST=mosquitto
MQTT_PORT=1883
MQTT_QOS_DEFAULT=1                   # default QoS (0,1,2) for publisher components
MQTT_TELEMETRY_TOPIC=telemetry/#     # wildcard subscription for consumer
MQTT_COMMAND_TOPIC=commands          # base topic for outgoing commands

# -----------------------------
# Backend API (Node.js/Express)
# -----------------------------
BACKEND_PORT=4000                    # external port for backend API
PORT=4000                            # internal port (used by server.js)
NODE_ENV=development                 # development|production
USE_MOCK_DB=false                    # true = use JSON mock data, false = use PostgreSQL
API_SECRET_KEY=change_me_api_secret  # session / signing secret
API_TOKEN=change_me_token            # simple static token (if used) - replace with JWT later
JWT_SECRET=change_me_jwt_secret      # future: JWT issuance
JWT_EXP_MINUTES=60
CORS_ALLOWED_ORIGINS=*               # comma separated or *
LOG_LEVEL=INFO                       # DEBUG|INFO|WARNING|ERROR


# -----------------------------
# WhatsApp Business API (Meta)
# -----------------------------
WHATSAPP_API_URL=https://graph.facebook.com/v17.0
WHATSAPP_PHONE_ID=your_phone_id_here
WHATSAPP_ACCESS_TOKEN=your_long_access_token_here
WHATSAPP_DEFAULT_RECIPIENT=351900000000
WHATSAPP_TEMPLATE_ALERT=greenhouse_alert # future: template name

# -----------------------------
# Security / Rate Limiting (future)
# -----------------------------
RATE_LIMIT_WINDOW_SECONDS=60
RATE_LIMIT_MAX_REQUESTS=120

# -----------------------------
# Frontend (React/Vite + Nginx)
# -----------------------------
FRONTEND_PORT=3000                   # external port for frontend
VITE_API_URL=http://localhost:4000   # backend API URL for development

# -----------------------------
# Build / CI flags (GitHub Actions etc.)
# -----------------------------
CI=false                             # set true automatically in pipelines
ENABLE_DB_MIGRATIONS=true            # worker/app may run migrations on boot
