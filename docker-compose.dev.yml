# Dev overrides: optimized for CI testing
# For local development with hot-reload, use docker-compose.local.yml instead
services:
  backend:
    environment:
      ENVIRONMENT: ${ENVIRONMENT:-development}
      LOG_LEVEL: ${LOG_LEVEL:-DEBUG}
      # CI uses test database (greenhouse_test)
      DATABASE_URL: postgresql://${DB_USER:-postgres}:${DB_PASSWORD:-postgres}@postgres:5432/greenhouse_test
    # NO volume mounts in CI - use built code
    # For local dev, use docker-compose.local.yml

  consumer:
    environment:
      RUST_LOG: ${RUST_LOG:-debug}
      # CI uses test database (greenhouse_test)
      DB_NAME: greenhouse_test
    # NO volume mounts in CI - use built binary

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
      args:
        VITE_API_URL: ${VITE_API_URL:-http://localhost:4000}
    environment:
      VITE_API_URL: ${VITE_API_URL:-http://localhost:4000}
    # NO volume mounts in CI - use built static files